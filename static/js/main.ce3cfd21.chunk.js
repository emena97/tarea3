(this.webpackJsonptarea3=this.webpackJsonptarea3||[]).push([[0],{101:function(e,t,n){},159:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/plane.1cf09d49.png"},168:function(e,t,n){},486:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),o=n(12),s=n.n(o),r=(n(168),n(4)),a=(n(101),n(98)),j=n.n(a)()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),l=n(31),u=n(2),d=function(e){var t=e.nombre,n=Object(c.useState)(""),i=Object(r.a)(n,2),o=i[0],s=i[1],a=Object(c.useState)([]),d=Object(r.a)(a,2),b=d[0],O=d[1];Object(c.useEffect)((function(){j.on("CHAT",(function(e){console.log(e.message,e.name,e.date),O([].concat(Object(l.a)(b),[e]))}))}),[b]);var h=Object(c.useRef)(null);Object(c.useEffect)((function(){h.current.scrollIntoView({behavior:"smooth"})}));return Object(u.jsxs)("div",{className:"chat_general",children:[Object(u.jsxs)("div",{className:"chat",children:[b.map((function(e,t){return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:Date(e.date)}),e.name,": ",e.message]},t)})),Object(u.jsx)("div",{ref:h})]}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("chat enviad0",o),j.emit("CHAT",{name:t,message:o})},children:[Object(u.jsx)("div",{children:Object(u.jsx)("textarea",{name:"",id:"txt",value:o,onChange:function(e){return s(e.target.value)}})}),Object(u.jsxs)("div",{id:"btn_msg",children:[Object(u.jsx)("label",{htmlFor:"",id:"label_msg",children:"Envie su Mensaje"}),Object(u.jsx)("button",{id:"btn_send",children:"Enviar"})]})]})]})},b=(n(160),0),O=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],i=t[1];j.emit("FLIGHTS");var o=[];function s(e,t){-1===o.indexOf(e.code)&&(o.push(e.code),n.push(e))}return Object(c.useEffect)((function(){j.on("FLIGHTS",(function(e){0===b&&(console.log("vuelos"),console.log(o),e.forEach(s),console.log(n),console.log("aaaaaaaa"),b=1,i(Object(l.a)(n)))}))})),Object(u.jsx)("div",{className:"flights",children:n.map((function(e,t){return Object(u.jsx)("ul",{id:"vuelo",children:Object(u.jsxs)("ul",{children:[Object(u.jsxs)("p",{children:["Aerolinea: ",Object(u.jsx)("b",{children:e.airline})]}),Object(u.jsxs)("p",{children:["Codigo: ",Object(u.jsx)("b",{children:e.code})]}),Object(u.jsxs)("p",{children:["Avi\xf3n: ",Object(u.jsx)("b",{children:e.plane})]}),Object(u.jsxs)("p",{children:["Capacidad: ",Object(u.jsx)("b",{children:e.seats})]}),Object(u.jsx)("p",{children:"Origen:"}),Object(u.jsx)("p",{children:e.origin[0]}),",",Object(u.jsx)("p",{children:e.origin[1]}),Object(u.jsx)("p",{children:"Destino:"}),Object(u.jsx)("p",{children:e.destination[0]}),", ",Object(u.jsx)("p",{children:e.destination[1]}),Object(u.jsx)("b",{children:"Pasajeros:"}),e.passengers.map((function(e,t){return Object(u.jsxs)("li",{children:[e.name,"  Edad:",e.age]})}))]})},t)}))})},h=(n(483),n(487)),p=n(490),f=n(489),x=n(491),m=(n(484),n(485),n(7)),g=n.n(m),v=n(488),S=g.a.icon({iconUrl:n(159),iconSize:[25,25]});new g.a.icon({iconUrl:n(159),iconSize:[25,25],className:"leaflet-div-icon"});g.a.Marker.prototype.options.icon=S;var E=0,F=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],i=t[1],o=Object(c.useState)([]),s=Object(r.a)(o,2),a=s[0],d=s[1],b=Object(c.useState)([]),O=Object(r.a)(b,2),m=O[0],g=O[1],S=[],F=[],I=[],C={};function T(e,t){-1===S.indexOf(e.code)&&(S.push(e.code),n.push(e),g([].concat(Object(l.a)(m),[[e.code]])),console.log(m))}return j.emit("FLIGHTS"),Object(c.useEffect)((function(){j.on("FLIGHTS",(function(e){0===E&&(e.forEach(T),E=1,i(Object(l.a)(n)))}))})),Object(c.useEffect)((function(){j.on("POSITION",(function(e){for(var t in-1===F.indexOf(e.code)&&(F.push(e.code),console.log(e.code),m.push([e.code])),I=[],C[e.code]=e.position,C)I.push([t,C[t][0],C[t][1]]);d(I);for(var n=0;n<m.length;n+=1)m[n][0]==e.code&&(m[n].push([e.position[0],e.position[1]]),g(Object(l.a)(m)),console.log(m))}))}),[]),Object(u.jsx)("div",{id:"mapa",className:"map__container",children:Object(u.jsxs)(h.a,{center:[48.864716,2.349],zoom:2,style:{height:"60vh"},children:[n.map((function(e,t){return Object(u.jsx)(p.a,{center:[e.origin[0],e.origin[1]]})})),n.map((function(e,t){return Object(u.jsx)(p.a,{center:[e.destination[0],e.destination[1]]})})),n.map((function(e,t){return Object(u.jsx)(v.a,{positions:[[e.origin[0],e.origin[1]],[e.destination[0],e.destination[1]]]})})),a.map((function(e,t){return Object(u.jsx)(p.a,{color:"red",center:[e[1],e[2]],radius:5,children:Object(u.jsx)(f.a,{direction:"top",opacity:1,permanent:!0,children:e[0]})})})),I.map((function(e,t){return Object(u.jsx)(p.a,{color:"red",center:[e[1],e[2]],radius:5})})),m.map((function(e,t){return e.slice(1).map((function(e,t){return Object(u.jsx)(p.a,{color:"red",center:[e[0],e[1]],radius:1})}))})),Object(u.jsx)(x.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})]})})};var I=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],i=t[1],o=Object(c.useState)(!1),s=Object(r.a)(o,2),a=s[0],j=s[1];return Object(u.jsxs)("div",{className:"App",children:[!a&&Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==n&&j(!0)},children:[Object(u.jsx)("label",{htmlFor:"",children:"Introduzca su nombre de usuario"}),Object(u.jsx)("input",{value:n,onChange:function(e){return i(e.target.value)}}),Object(u.jsx)("button",{children:"Entrar"})]}),Object(u.jsxs)("div",{id:"superior",children:[a&&Object(u.jsx)(F,{}),a&&Object(u.jsx)(d,{nombre:n})]}),Object(u.jsx)("div",{children:a&&Object(u.jsx)(O,{})})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,492)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),o(e),s(e)}))};s.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(I,{})}),document.getElementById("root")),C()}},[[486,1,2]]]);
//# sourceMappingURL=main.ce3cfd21.chunk.js.map