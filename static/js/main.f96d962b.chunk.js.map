{"version":3,"sources":["componentes/plane.png","componentes/socket.js","componentes/Chat.js","componentes/Flights.js","componentes/Mapa.js","App.js","reportWebVitals.js","index.js"],"names":["socket","io","path","Chat","nombre","useState","mensaje","setMensaje","mensajes","setMensajes","useEffect","on","data","console","log","message","name","date","off","divRef","useRef","current","scrollIntoView","behavior","className","map","e","i","Date","ref","onSubmit","preventDefault","emit","id","value","onChange","target","htmlFor","seteado","Flights","vuelos","setVuelos","vuelos_cod","guardar","elemento","index","indexOf","code","push","forEach","airline","plane","seats","origin","destination","passengers","pas","age","DefaultIcon","L","icon","iconUrl","require","iconSize","Marker","prototype","options","Mapa","aviones","setAviones","posiciones","setPosiciones","vuelos_cod2","lis_aviones","dict_aviones","key","position","pos","length","MapContainer","center","zoom","style","height","vuelo","CircleMarker","Polyline","positions","color","radius","Tooltip","direction","opacity","permanent","slice","j","TileLayer","attribution","url","App","setNombre","registrado","setRegistrado","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f96d962b.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/plane.1cf09d49.png\";","import io from 'socket.io-client';\n\nlet socket = io(\"wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl\", {\n    path: '/flights'\n});\n\nexport default socket; ","import React, {useEffect, useState, useRef} from 'react';\nimport socket from './socket';\nimport '../App.css'\n\nconst Chat = ({nombre}) =>{\n\n    const [mensaje, setMensaje] = useState(\"\");\n    const [mensajes, setMensajes] = useState([]);\n\n    useEffect(() => {\n        //aca le cambie mensaje por message\n        socket.on(\"CHAT\", function(data) {\n            console.log(data.message, data.name, data.date);\n            setMensajes([...mensajes, data]);\n        })\n\n        return () => {socket.off()}\n    }, [mensajes])\n\n    const divRef = useRef(null);\n    useEffect(() =>{\n        divRef.current.scrollIntoView({behavior: 'smooth'})\n    })\n\n    //useEffect(() => {\n    //    socket.on('POSITION', function(data){\n    //       console.log(data.code);\n    //    })\n    //})\n\n    const submit = (e) =>{\n        e.preventDefault();\n        console.log('chat enviad0', mensaje);\n        socket.emit(\"CHAT\",{\"name\": nombre, \"message\": mensaje} )\n    }\n\n    return(\n        <div className=\"chat_general\">\n            <div className=\"chat\">\n                {mensajes.map((e, i) => <div key={i}><div>{Date(e.date)}</div>{e.name}: {e.message}</div>)}\n                <div ref={divRef}></div>\n            </div>\n\n                <form onSubmit={submit}>\n                    <div>\n                        <textarea name=\"\" id=\"txt\" value={mensaje} onChange={e => setMensaje(e.target.value)}>\n                        </textarea>\n                    </div>\n                    <div id=\"btn_msg\">\n                        <label htmlFor=\"\" id=\"label_msg\">Envie su Mensaje</label>\n                        <button id=\"btn_send\">Enviar</button>\n                    </div>\n                    \n                    \n                    \n                </form>\n        </div>\n        \n\n    );\n}\n\n\nexport default Chat;","import { render } from '@testing-library/react';\nimport React, {useEffect, useState} from 'react';\nimport socket from './socket';\n\n\nvar seteado = 0;\n\nconst Flights = () => {\n\n    const [vuelos, setVuelos] = useState([]);\n\n    socket.emit(\"FLIGHTS\");\n\n    const vuelos_cod = [] \n\n    function guardar(elemento, index){\n        if (vuelos_cod.indexOf(elemento.code) === -1){\n            vuelos_cod.push(elemento.code);\n            vuelos.push(elemento);\n        }\n        \n    }\n    useEffect(() => {\n        socket.on(\"FLIGHTS\", function(data){\n            if (seteado === 0){\n                console.log(\"vuelos\");\n                console.log(vuelos_cod);\n                data.forEach(guardar);\n                console.log(vuelos);\n                console.log(\"aaaaaaaa\");\n                seteado = 1;  \n                setVuelos([...vuelos]);\n            }\n        })\n\n    })\n    \n    \n    \n    return( \n        <div className=\"flights\">\n            {vuelos.map((e, i) =>\n            <ul id=\"vuelo\" key={i}>\n                <ul>\n                            \n                    <p>Aerolinea: <b>{e.airline}</b></p>\n                    <p>Codigo: <b>{e.code}</b></p>\n                    <p>Avi√≥n: <b>{e.plane}</b></p>\n                    <p>Capacidad: <b>{e.seats}</b></p>\n                    <p>Origen:</p>\n                    <p>{e.origin[0]}</p>,<p>{e.origin[1]}</p>\n                    <p>Destino:</p>\n                    <p>{e.destination[0]}</p>, <p>{e.destination[1]}</p>\n                    <b>Pasajeros:</b>\n                    {e.passengers.map((pas, i) => (\n                        <li>\n                            {pas.name}  Edad:{pas.age}\n                        </li>\n                        \n                    ))\n                    \n                    }\n                </ul>  \n            </ul>\n            )}\n        </div>\n        \n        \n        \n    )\n\n\n}\n\nexport default Flights;\n","import \"leaflet/dist/leaflet.css\";\nimport { render } from '@testing-library/react';\nimport React, {useEffect, useState} from 'react';\nimport socket from './socket';\nimport { MapContainer, TileLayer, Marker, Popup, LatLngExpression, CircleMarker, Tooltip} from 'react-leaflet'\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\nimport L, { latLng } from 'leaflet';\nimport { Polyline, SVGOverlay } from \"react-leaflet\";\n\n\n\n\n<head>\n    <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css\"\n   integrity=\"sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==\"\n   crossorigin=\"\"/>\n</head>\n\nlet DefaultIcon = L.icon({\n    iconUrl: require('./plane.png'),\n    iconSize: [25, 25]\n});\n\nconst planeIcon = new L.icon({\n    iconUrl: require('./plane.png'),\n    iconSize: [25, 25],\n    className: 'leaflet-div-icon'\n})\n\nL.Marker.prototype.options.icon = DefaultIcon;\n\n\nvar seteado = 0;\n\nconst Mapa = () => {\n    const [vuelos, setVuelos] = useState([])\n    const [aviones, setAviones] = useState([])\n    const [posiciones, setPosiciones] = useState([])\n    const vuelos_cod = [] \n    const vuelos_cod2 = []\n\n    var lis_aviones = []\n    var dict_aviones = {}\n\n    function guardar(elemento, index){\n        if (vuelos_cod.indexOf(elemento.code) === -1){\n            vuelos_cod.push(elemento.code);\n            vuelos.push(elemento);\n            setPosiciones([...posiciones, [elemento.code]])\n            console.log(posiciones)\n        }\n        \n    }\n    socket.emit(\"FLIGHTS\");\n    useEffect(() => {\n        socket.on(\"FLIGHTS\", function(data){\n            if (seteado === 0){\n                data.forEach(guardar);\n                seteado = 1;  \n                setVuelos([...vuelos]);\n            }\n        })\n\n    })\n\n    useEffect(() => {\n        socket.on(\"POSITION\", function(data){\n            if (vuelos_cod2.indexOf(data.code) === -1){\n                vuelos_cod2.push(data.code);\n                console.log(data.code)\n                posiciones.push([data.code])\n\n            }\n            lis_aviones = []\n            dict_aviones[data.code] = data.position\n            for (let key in dict_aviones){\n                lis_aviones.push([key, dict_aviones[key][0], dict_aviones[key][1]])\n            }\n            setAviones(lis_aviones)\n            for (let pos = 0; pos<posiciones.length; pos += 1){\n                if (posiciones[pos][0] == data.code){\n                    posiciones[pos].push([data.position[0], data.position[1]])\n                    setPosiciones([...posiciones])\n                    console.log(posiciones)\n                }\n                \n            }\n            } \n            \n\n                  \n        )        \n    },[])\n    \n\n   \n    return(\n\n        <div id=\"mapa\" className='map__container'>\n            <MapContainer\n            center={[48.864716, 2.349]}\n            zoom={2}\n            style={{height: \"60vh\"}}\n            >\n               \n                {  \n                    vuelos.map((vuelo,i) => (     \n                        <CircleMarker\n                        center={[vuelo.origin[0], vuelo.origin[1]]}\n                        >\n                        </CircleMarker> \n                    ))   \n                }\n                {  \n                    vuelos.map((vuelo,i) => (     \n                        <CircleMarker\n                        center={[vuelo.destination[0], vuelo.destination[1]]}\n                        >\n                        </CircleMarker>\n                        \n                    ))   \n                }\n                {  \n                    vuelos.map((vuelo,i) => (     \n                        <Polyline\n                        positions={[[vuelo.origin[0], vuelo.origin[1]], [vuelo.destination[0], vuelo.destination[1]]]}\n                        />\n                    ))   \n                }\n                {\n                    aviones.map((e, i) => (\n                   \n                        <CircleMarker\n                        color={'red'}\n                        center={[e[1], e[2]]}\n                        radius={5}\n                        >\n                           <Tooltip direction=\"top\" opacity={1} permanent>{e[0]}</Tooltip>\n                        </CircleMarker>\n                    ))  \n                }\n                {\n                    lis_aviones.map((e,i) => (\n                      <CircleMarker\n                        color={'red'}\n                        center={[e[1], e[2]]}\n                        radius={5}\n                      >\n                      </CircleMarker>  \n                    ))\n                }\n                {\n                    posiciones.map((vuelo, i) => (\n                        vuelo.slice(1).map((pos, j) => (\n                           \n                                <CircleMarker\n                                color={'red'}\n                                center={[pos[0], pos[1]]}\n                                radius={1}\n                                >\n                                </CircleMarker> \n       \n                            \n                        ))\n                    ))\n                }\n\n               \n\n                <TileLayer\n                \n                    attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                    url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n\n                />\n            </MapContainer>\n            \n        </div>\n    )\n\n}\n\nexport default Mapa;","\nimport './App.css';\nimport socket from './componentes/socket';\nimport { io } from 'socket.io-client';\nimport React, { useEffect, useState }  from 'react';\nimport Chat from './componentes/Chat';\nimport Flights from './componentes/Flights';\nimport Mapa from './componentes/Mapa'\n\n\n<head>\n<link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css\"\n   integrity=\"sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==\"\n   crossorigin=\"\"/>\n\n\n</head>\n\n\nfunction App() {\n  const [nombre, setNombre] =  useState(\"\");\n  const [registrado, setRegistrado] = useState(false);\n\n  const registrar = (e) => {\n    e.preventDefault();\n    if(nombre !== \"\"){\n      setRegistrado(true);\n    }\n  }\n  return (\n    <div className=\"App\">\n      {\n        !registrado &&\n        <form onSubmit = {registrar}>\n          <label htmlFor=\"\">Introduzca su nombre de usuario</label>\n          <input value={nombre} onChange={e => setNombre(e.target.value)}/>\n          <button>Entrar</button>\n        </form>\n      }\n      <div id=\"superior\">\n        {\n          registrado &&\n          <Mapa/>\n        }\n        {\n          registrado &&\n          <Chat nombre={nombre}/>\n        }\n      </div>\n      \n      <div>\n        {\n          registrado &&\n          <Flights/>\n        } \n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}